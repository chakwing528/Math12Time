<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>古制時辰輪盤抽獎</title>
    <style>
        :root {
            --bg-night: #bcd4f5;
            --bg-dawn: #dce8f7;
            --bg-day: #fff1ad;
            --bg-dusk: #fef4ca;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: #f0f0f0;
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
        }

        .wheel-box {
            position: relative;
            width: 500px;
            height: 500px;
        }

        /* 外部小時數字標籤 */
        .hour-label {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            font-weight: bold;
            font-size: 24px;
            pointer-events: none;
        }

        /* 輪盤主體 */
        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid #ccc;
            position: relative;
            transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1);
            background: conic-gradient(
                var(--bg-night) 0deg 75deg,   /* 23-05 (子丑寅) */
                var(--bg-dawn) 75deg 105deg,  /* 05-07 (卯) */
                var(--bg-day) 105deg 225deg,  /* 07-15 (辰巳午未) */
                var(--bg-dusk) 225deg 285deg, /* 15-19 (申酉) */
                var(--bg-night) 285deg 360deg /* 19-23 (戌亥) */
            );
            overflow: hidden;
        }

        /* 24個扇區的線條 */
        .line {
            position: absolute;
            width: 2px;
            height: 50%;
            background: rgba(255, 255, 255, 0.8);
            left: 50%;
            transform-origin: bottom;
        }

        /* 文字容器 */
        .text-container {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
        }

        .label-shichen { font-size: 28px; font-weight: bold; margin-top: 110px; position: absolute; }
        .label-chuzheng { font-size: 16px; margin-top: 40px; position: absolute; }
        .label-geng { font-size: 14px; margin-top: 75px; position: absolute; color: #333; }

        /* 中心按鈕 */
        .pointer-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: #fff;
            border: 4px solid #333;
            border-radius: 50%;
            z-index: 10;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* 上方紅色指針 */
        .top-arrow {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #e74c3c;
            z-index: 11;
        }

        #result { margin-top: 30px; font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="wheel-box">
        <div class="top-arrow"></div>
        <div class="pointer-center" id="spin-btn">抽</div>
        <div id="wheel"></div>
        
        <div id="hour-labels-container"></div>
    </div>

    <div id="result">點擊中間「抽」字開始</div>

    <script>
        const shichens = ["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"];
        const gengs = { "戌": "一更", "亥": "二更", "子": "三更", "丑": "四更", "寅": "五更" };
        const wheel = document.getElementById('wheel');
        const labelsContainer = document.getElementById('hour-labels-container');

        // 1. 生成 24 個扇區與文字 (每格 15 度)
        for (let i = 0; i < 24; i++) {
            const angle = i * 15;
            
            // 畫線
            const line = document.createElement('div');
            line.className = 'line';
            line.style.transform = `rotate(${angle}deg)`;
            wheel.appendChild(line);

            // 放置「初/正」
            const wrap = document.createElement('div');
            wrap.className = 'text-container';
            wrap.style.transform = `rotate(${angle + 7.5}deg)`;
            
            const chuzheng = document.createElement('div');
            chuzheng.className = 'label-chuzheng';
            chuzheng.innerText = i % 2 === 0 ? "初" : "正";
            wrap.appendChild(chuzheng);

            // 放置「時辰」 (每兩格放一個字)
            if (i % 2 === 0) {
                const shichenIdx = (i / 2);
                const st = document.createElement('div');
                st.className = 'label-shichen';
                st.innerText = shichens[shichenIdx];
                st.style.transform = `rotate(7.5deg)`; // 修正到兩個小格中間
                wrap.appendChild(st);

                // 放置「更」
                if (gengs[shichens[shichenIdx]]) {
                    const gt = document.createElement('div');
                    gt.className = 'label-geng';
                    gt.innerText = gengs[shichens[shichenIdx]];
                    gt.style.transform = `rotate(7.5deg)`;
                    wrap.appendChild(gt);
                }
            }
            wheel.appendChild(wrap);
        }

        // 2. 生成外部小時標籤 (1, 3, 5... 23)
        for (let h = 1; h <= 23; h += 2) {
            const hLab = document.createElement('div');
            hLab.className = 'hour-label';
            // 根據圖片，1點在正上方偏右，對應 15度
            const hAngle = (h * 15); 
            hLab.style.transform = `rotate(${hAngle}deg)`;
            hLab.innerHTML = `<span style="display:inline-block; transform:rotate(-${hAngle}deg)">${h}</span>`;
            labelsContainer.appendChild(hLab);
        }

        // 3. 抽獎邏輯
        let currentDeg = 0;
        document.getElementById('spin-btn').addEventListener('click', () => {
            const rotate = Math.floor(Math.random() * 360) + 3600; // 轉 10 圈起跳
            currentDeg += rotate;
            wheel.style.transform = `rotate(-${currentDeg}deg)`;

            const resultDiv = document.getElementById('result');
            resultDiv.innerText = "旋轉中...";

            setTimeout(() => {
                const actualDeg = currentDeg % 360;
                // 每格 15 度
                const idx = Math.floor(actualDeg / 15);
                const shichen = shichens[Math.floor(idx / 2)];
                const part = idx % 2 === 0 ? "初" : "正";
                resultDiv.innerText = `結果：${shichen}時${part}`;
            }, 5000);
        });
    </script>
</body>
</html>
